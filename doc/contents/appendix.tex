\begin{appendices}

\chapter{Discrete Fourier Transform}
In this report it is assumed that the harmonic order of the spatial signal is known. The DFT is primarily used to identify the amplitude of the harmonics. Furthermore, the considered function is periodic: $f(x_1)=f(x_{N+1})$.

The base function used in the analysis is the $\cos(\theta-\phi)$ function, where $\phi$ is the phase shift. The visualisation for different values of phase shift is shown in Fig.~\ref{fig:base}.  

\begin{figure}[htbp]
  \centering
  \fontsize{6}{0}\selectfont
  \setlength\fwidth{0.26\textwidth}
  \subfloat[$\cos\bigl(\theta-(-30)\bigr)$]{
  \input{figs/cosA.tex}}
  \hfill
  \subfloat[$\cos(\theta)$]{
  \input{figs/cosB.tex}}
  \hfill
  \subfloat[$\cos\bigl(\theta-(+30)\bigr)$]{
  \input{figs/cosC.tex}}
  \caption{Base function}
  \label{fig:base}
\end{figure}

It is very important to mention that any initial phase shift (or offset) should be accounted for. Typically a function will be defined between $\theta_1$ and $\theta_2$ where $\theta_1\neq 0$. The difference between $\theta_1$ and $0$ should be accounted for since the phase from the DFT assumes that the sampled data has it origin at $(0,0)$. Neglecting this may leads to inaccurate results. 

The DFT of a vector $x$ of length $N$ is another vector $X$ of length $N$. This notation uses $j$ and $k$ for indices that run from 1 to $N$. The vector $x$ is sampled at sampling wave length $d\lambda=\lambda_s$ and is a multiple of the fundamental (or the working harmonic), i.e.~$\lambda_1 = N\lambda_s$. The basic definition of the DFT\footnote{See \cite{REF-01048, REF-01049, REF-01050} for some reasons why the exponent is negative.} and its inverse are given as
\begin{equation}\label{eqn:dft}
  \begin{aligned}
  X(k) &= \sum_{j=1}^N \; x(j) \; \omega_N^{(j-1)(k-1)}\\
  x(j) &= \cfrac{1}{N}\sum_{k=1}^N \; X(k) \; \omega_N^{-(j-1)(k-1)}
  \end{aligned}
  \qquad
  \begin{cases}
    j \in \left\{1,\ldots,N  \right\} \rightarrow \; \mbox{sampled data}\\
  	k \in \left\{1,\ldots,N  \right\} \rightarrow \; \mbox{harmonic order}\\
    \omega_N = e^{-\theta i}  \\
  	\theta = \frac{2\pi}{N}   \\
  	e^{-\theta i} = \cos (-\theta) + i \sin (-\theta)
  \end{cases}
\end{equation}
The user defined function is given at the end of this section. An example that verify the function is given in Fig.~\ref{fig:user}. This basic function, for example, can now be used to determine the direct and quadrature axes in an electrical machine. 

\begin{figure}[htbp]
  \centering  
  \fontsize{6}{0}\selectfont
  \setlength\fwidth{0.43\textwidth}
  \subfloat[$\phi = \SI{-60}{\arcdeg}$]{
  \input{figs/cosD.tex}}
  \hfill
  \subfloat[$\phi = \SI{33}{\arcdeg}$]{
  \input{figs/cosE.tex}}
  \caption{Test examples}
  \label{fig:user}
\end{figure}

\verbatiminput{../code/test_dft.m}

\chapter{Slot assignment \texttt{CDesign.m}}\label{sec:malg}
\verbatiminput{../code/CDesign.m}

\chapter{Examples \texttt{arun.m}}\label{sec:mex}
\verbatiminput{../code/arun.m}

\begin{figure}[htbp]
\centering
\fontsize{8}{0}\selectfont
\setlength\fwidth{0.45\textwidth}
\subfloat{
\input{figs/fig6b.tex}}
\hfill
\setlength\fwidth{0.45\textwidth}
\subfloat{
\input{figs/fig7b.tex}}
\\
\fontsize{8}{0}\selectfont
\setlength\fwidth{0.45\textwidth}
\subfloat{
\input{figs/fig8b.tex}}
\hfill
\fontsize{8}{0}\selectfont
\setlength\fwidth{0.45\textwidth}
\subfloat{
\input{figs/fig9b.tex}}
\caption{Test results using \texttt{arun.m}}
\label{fig:tests}
\end{figure}

\end{appendices}